<% layout("/layouts/boilerplate") %>

<body class="favourites-page">
  <h2 class="mb-4">Your Favourite Listings</h2>

  <div class="row row-cols-lg-3 row-cols-md-2 row-cols-1 g-4">
    <% for (let listing of user.favourites) { %>

      <div class="col">
        <div class="card card-listing h-100">

          <!-- Image (clickable) -->
          <div class="image-wrapper">
            <a href="/listings/<%= listing._id %>" class="listing-link">
              <img
                src="<%= listing.image.url %>"
                class="card-img-top"
                alt="listing image"
                style="height: 20rem; object-fit: cover;">
            </a>
          </div>

          <!-- Card body -->
          <div class="card-body">
            <p class="card-text mb-1">
              <b><%= listing.title %></b><br>
              &#8377;
              <%= listing.price ? listing.price.toLocaleString('en-IN') : 'N/A' %>
              / night
              <i class="tax-info">+18 GST</i>
            </p>
              <div class="col-4">
            <div class="mt-4 mb-4">
              <form action="/favourite/<%= listing._id %>?_method=DELETE" method="post">
                <button class="btn btn-danger">Delete</button>
              </form>
            </div>
          </div>
          </div>

        </div>
      </div>

    <% } %>
  </div>
</body>
